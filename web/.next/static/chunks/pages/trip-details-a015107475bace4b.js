(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1879],{4833:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trip-details",function(){return t(73949)}])},69568:function(e,s,t){"use strict";t.d(s,{B7:function(){return c},Er:function(){return l},s0:function(){return n},zH:function(){return r}});var i=t(87066);let a="".concat("https://www.webapi.taxisafar.com","/api"),l=(e,s)=>i.Z.post("".concat(a,"/trip"),e,{headers:{Authorization:"Bearer ".concat(s)}}).then(e=>e.data),n=(e,s)=>i.Z.get("".concat(a,"/trip/").concat(e),{headers:{Authorization:"Bearer ".concat(s)}}).then(e=>e.data),c=(e,s,t)=>i.Z.get("".concat(a,"/trip?userId=").concat(e,"&tripStatus=").concat(s),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.data),r=e=>i.Z.post("".concat(a,"/booking_limit/check_booking_available"),e).then(e=>e.data)},73949:function(e,s,t){"use strict";t.r(s);var i=t(85893),a=t(11163),l=t(67294),n=t(88083),c=t(69568);s.default=()=>{var e,s,t,r,d,o,m,x,p,u,h;let v=(0,a.useRouter)(),{id:j}=v.query;console.log("id",j);let[g,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{N(localStorage.getItem("token"))},[]);let[b,f]=(0,l.useState)(null);function y(e){let s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";let t=s.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],a=s.getFullYear().toString().slice(-2),l=s.getHours(),n=s.getMinutes().toString().padStart(2,"0"),c=l>=12?"pm":"am";return l%=12,l=l||12,"".concat(t," ").concat(i,", ").concat(a," • ").concat(l,":").concat(n," ").concat(c)}(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,c.s0)(j,g);!0==e.status&&f(null==e?void 0:e.data)}catch(e){console.log(e)}})()},[j]),console.log("DAta byId",b);let w=null==b?void 0:b.places,_=b?JSON.parse(null==b?void 0:b.places):[];w&&(null===(s=JSON.parse(w))||void 0===s||null===(e=s[0])||void 0===e||e.label),w&&(null===(r=JSON.parse(w))||void 0===r||null===(t=r.at(-1))||void 0===t||t.label),console.log("placeJSON",_),null==b||b.trip_status,console.log("dataById",b);let k=async e=>{try{console.log("Download");let s=await fetch("".concat("https://www.webapi.taxisafar.com","/api/transaction/pdf/").concat(e),{method:"GET",headers:{"Content-Type":"application/pdf"}});if(console.log(s),!s.ok)throw Error("Failed to fetch the PDF");let t=await s.blob(),i=window.URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download="receipt.pdf",document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i)}catch(e){console.error("Error downloading the PDF:",e)}};return(0,i.jsx)("div",{className:"",children:(0,i.jsxs)("div",{className:"container booking_page pt-2 pb-4",style:{marginTop:"85px"},children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsx)("button",{className:"bg-light",style:{border:"0px",borderRadius:"100%",height:"40px",width:"40px"},children:(0,i.jsx)("img",{src:"../images/icons/left-arrow.png",width:"24px",height:"24px",onClick:()=>v.push("booking")})}),(0,i.jsx)("h2",{className:"my-3 text-center text-dark",children:"Trip Details"}),(0,i.jsx)("img",{src:"../images/icons/question-mark.svg",width:"24px",height:"24px"})]}),(0,i.jsx)("div",{className:"d-flex justify-content-center align-items-center py-2",children:(0,i.jsx)("img",{src:"../images/resource/map.png",width:"343px",height:"160px"})}),(0,i.jsx)("div",{className:"card my-2 border-0",children:(0,i.jsx)("div",{className:"card-body rounded  ",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("div",{className:"car-box border px-2 py-1 rounded",children:(0,i.jsx)("img",{src:"../images/icons/booking-car.png",width:"40px",height:"40px"})}),(null==b?void 0:b.id)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"text-start mt-1",children:[(0,i.jsxs)("h6",{className:"mb-0",children:["Booking Id : ","TS".concat(String(null==b?void 0:b.id).padStart(3,"0"))]}),(0,i.jsx)("p",{className:"mb-0",style:{color:"#010005",fontSize:"13px"},children:y(null==b?void 0:b.departure_date)}),(null==b?void 0:b.return_date)&&(0,i.jsx)("p",{className:"mb-0",style:{color:"#010005",fontSize:"13px",lineHeight:"6px"},children:y(null==b?void 0:b.return_date)})]}),(0,i.jsxs)("div",{className:"text-end mt-1",children:[(0,i.jsxs)("h6",{className:"mb-0",children:["₹",null==b?void 0:null===(d=b.Transactions[0])||void 0===d?void 0:d.original_amount]}),(null==b?void 0:b.trip_status)&&(0,i.jsxs)("p",{className:"".concat({reserved:"text-warning",active:"text-primary",completed:"text-success",cancel:"text-danger"}[null==b?void 0:b.trip_status]||"text-dark"," mb-0"),style:{fontSize:"14px"},children:["• ",(null==b?void 0:b.trip_status.charAt(0).toUpperCase())+(null==b?void 0:b.trip_status.slice(1).toLowerCase())]})]})]})]})})}),(0,i.jsx)("div",{className:"card p-4 border-0 rounded-4 ",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsxs)("div",{className:"d-flex item-center  align-items-center justify-content-between",children:[(0,i.jsxs)("div",{className:"text-start  ",children:[(0,i.jsx)("h4",{className:" fs-6 font-medium  mb-2",style:{color:"#01000599"},children:null==b?void 0:b.Vehicle.title}),(0,i.jsx)("h4",{className:"mb-0   fs-6 font-medium ",style:{color:"#010005"}})]}),(0,i.jsx)("div",{className:"text-start  d-flex item-center  align-items-center justify-content-between gap-3",children:(0,i.jsx)("img",{src:"../images/resource/cars.png",width:"110px",height:"44px"})})]}),(0,i.jsxs)(n.Z,{xs:12,md:12,className:"d-md-inline mt-2",children:[(0,i.jsxs)("div",{className:"bookingtype",style:{position:"relative",zIndex:"9",width:"auto",textAlign:"center",top:"25px",marginTop:"-25px"},children:[b&&b.trip_type&&(0,i.jsxs)("button",{className:"badge active",children:["oneWay"===b.trip_type&&(0,i.jsx)("p",{className:"mb-0 custom-vicky-value",children:"One Way"}),"roundTrip"===b.trip_type&&(0,i.jsx)("p",{className:"mb-0 custom-vicky-value",children:"Round Trip"}),"local"===b.trip_type&&(0,i.jsx)("p",{className:"mb-0 custom-vicky-value",children:"Local Rental"}),"airport"===b.trip_type&&(0,i.jsx)("p",{className:"mb-0 custom-vicky-value",children:"Airport Transfer"})]}),(null==b?void 0:b.dham_category_name)&&(0,i.jsx)("button",{className:"badge active",children:(0,i.jsx)("p",{className:"mb-0 custom-vicky-value",children:null==b?void 0:b.dham_category_name})})]}),(0,i.jsx)("hr",{className:"mx-3"})]}),_.map((e,s)=>(0,i.jsxs)("div",{className:"taxisafar-itinerary g-2 align-items-center d-flex",children:[(0,i.jsx)("div",{className:"timeline-column position-relative d-flex justify-content-start",children:(0,i.jsxs)("div",{className:"timeline-dotline",children:[(0,i.jsx)("div",{className:"dot"}),s!==_.length-1&&(0,i.jsx)("div",{className:"vertical-dashed-line"})]})}),(0,i.jsx)("div",{className:"w-100 ms-3",children:(0,i.jsxs)("div",{className:"trip_places my-2 d-flex p-3 align-items-center",children:[0===s&&(0,i.jsx)("img",{src:"./images/icons/pickup.png",className:"me-3",height:"24px",width:"24px"}),!(0===s||s===_.length-1)&&(0,i.jsx)("img",{src:"./images/icons/stops.png",className:"me-3",height:"24px",width:"24px"}),s===_.length-1&&(0,i.jsx)("img",{src:"./images/icons/destination.png",className:"me-3",height:"24px",width:"24px"}),(0,i.jsx)("h6",{className:"mb-0 heading",children:(null==e?void 0:e.label)||(null==e?void 0:e.name)})]})})]},s)),(0,i.jsxs)("div",{className:" d-flex flex-column gap-3 trip-distance-container mt-3",children:[(null==b?void 0:b.distance)&&(0,i.jsxs)("div",{className:" d-flex justify-content-between trip-distance  pb-3 ",children:[(0,i.jsx)("p",{className:" driver-name mb-0 ",style:{color:"#01000599"},children:"Trip Distance"}),(0,i.jsx)("p",{className:"  driver-name font-medium mb-0 ",style:{color:"#010005"},children:null==b?void 0:b.distance})]}),(null==b?void 0:b.extra_km)&&(0,i.jsxs)("div",{className:" d-flex justify-content-between trip-distance   pb-3",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Extra km Charges"}),(0,i.jsxs)("p",{className:"  driver-name font-medium mb-0  ",style:{color:"#010005"},children:["₹",null==b?void 0:b.extra_km," / km"]})]}),(null==b?void 0:b.additional_time_charge)&&(0,i.jsxs)("div",{className:" d-flex justify-content-between trip-distance   pb-3",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Extra Time Charges"}),(0,i.jsxs)("p",{className:"  driver-name font-medium mb-0  ",style:{color:"#010005"},children:["₹",null==b?void 0:b.additional_time_charge," / Hour"]})]}),(0,i.jsxs)("div",{className:" d-flex justify-content-between trip-distance   pb-3",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Tolls & Inter State Charges"}),(0,i.jsx)("p",{className:"  driver-name font-medium mb-0  ",style:{color:"#010005"},children:(null==b?void 0:b.toll_tax)?"Included":"Not Included"})]}),(0,i.jsxs)("div",{className:" d-flex justify-content-between   ",children:[(0,i.jsx)("p",{className:"driver-name  mb-0 ",style:{color:"#01000599"},children:"Parking Charges"}),(0,i.jsx)("p",{className:"  driver-name font-medium mb-0  ",style:{color:"#010005"},children:(null==b?void 0:b.parking_charges)?"Included":"Not Included"})]})]})]})}),(0,i.jsx)("div",{className:"card p-4 border-0 mt-4 rounded-4 ",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h6",{className:" font-semibold  mb-3",style:{color:"#01000599"},children:"Bill Details"}),(0,i.jsxs)("div",{className:" d-flex flex-column gap-3 ",children:[(0,i.jsxs)("div",{className:" d-flex justify-content-between   ",children:[(0,i.jsx)("p",{className:" driver-name mb-0 ",style:{color:"#01000599"},children:"Trip Distance"}),(0,i.jsx)("p",{className:"  driver-name font-medium mb-0 ",style:{color:"#010005"},children:null==b?void 0:b.distance})]}),(0,i.jsxs)("div",{className:" d-flex justify-content-between ",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Extra km Charges"}),(0,i.jsxs)("p",{className:"  driver-name font-medium mb-0  ",style:{color:"#010005"},children:["₹",null==b?void 0:b.extra_km," / km"]})]}),(0,i.jsxs)("div",{className:"end-trip-pin d-flex item-center  align-items-center justify-content-between ",children:[(0,i.jsxs)("p",{className:"mb-0  font-semibold  fs-6",style:{color:"#010005"},children:["Total Bill"," "]}),(0,i.jsxs)("p",{className:" fs-6 font-semibold mb-0  ",style:{color:"#010005"},children:["₹",null==b?void 0:null===(o=b.Transactions[0])||void 0===o?void 0:o.original_amount]})]})]})]})}),(0,i.jsx)("div",{className:"card p-4   rounded-4 payment-method-card  ",style:{borderTop:"2px dashed #ccc"},children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h6",{className:" font-semibold  mb-3",style:{color:"#01000599"},children:"Payment Method"}),(0,i.jsxs)("div",{className:" d-flex flex-column gap-3 ",children:[(0,i.jsxs)("div",{className:" d-flex justify-content-between   ",children:[(0,i.jsx)("p",{className:" driver-name mb-0 ",style:{color:"#01000599"},children:"Payment ID"}),(0,i.jsx)("p",{className:"  driver-name font-medium mb-0 ",style:{color:"#010005"},children:null==b?void 0:null===(m=b.Transactions[0])||void 0===m?void 0:m.payment_id})]}),(0,i.jsxs)("div",{className:" d-flex justify-content-between  ",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Mode of Payment"}),(0,i.jsx)("p",{className:"  driver-name font-medium  mb-0 text-capitalize",style:{color:"#010005"},children:null==b?void 0:null===(x=b.Transactions[0])||void 0===x?void 0:x.method})]}),(0,i.jsxs)("div",{className:" d-flex justify-content-between  ",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Advance Amount"}),(0,i.jsxs)("p",{className:"  driver-name font-medium  mb-0 text-capitalize",style:{color:"#010005"},children:["₹ ",null==b?void 0:null===(p=b.Transactions[0])||void 0===p?void 0:p.paid_amount]})]}),(0,i.jsxs)("div",{className:" d-flex justify-content-between ",children:[(0,i.jsx)("p",{className:" driver-name  mb-0 ",style:{color:"#01000599"},children:"Status"}),(0,i.jsxs)("p",{className:"  driver-name font-medium mb-0  ",style:{color:"#3ABA56"},children:[(0,i.jsx)("img",{src:"../images/icons/green-check.svg",className:"me-1",width:"12px",height:"12px"}),"\xa0",(null==b?void 0:null===(u=b.Transactions[0])||void 0===u?void 0:u.paid_amount)&&(null==b?void 0:null===(h=b.Transactions[0])||void 0===h?void 0:h.original_amount)&&(0,i.jsxs)(i.Fragment,{children:[(b.Transactions[0].paid_amount/b.Transactions[0].original_amount*100).toFixed(0),"% \xa0"]}),"Advance Paid"]})]})]})]})}),(null==b?void 0:b.trip_status)==="completed"&&(0,i.jsxs)("div",{className:"bg-light rounded-2 d-flex flex-row p-2 mt-4 align-items-center justify-content-center border-black",style:{cursor:"pointer"},onClick:e=>{var s;e.stopPropagation(),console.log("Invoice Clicked"),k(null==b?void 0:null===(s=b.Transactions[0])||void 0===s?void 0:s.id)},children:[(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:"/images/icons/invoice.png",width:"20px",height:"23px",alt:"Invoice Icon"})}),(0,i.jsx)("div",{className:"ms-2 text-black",children:"Download Invoice"})]})]})})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=4833)}),_N_E=e.O()}]);