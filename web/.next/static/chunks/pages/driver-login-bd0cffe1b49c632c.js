(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5539],{27128:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/driver-login",function(){return n(68944)}])},79556:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var s=n(67294),r=n(93967),a=n.n(r),o=n(76852);let i=2147483648-1;var l=n(16592),c=n(47218),d=n(85893);let u={[l.d0]:"showing",[l.Ix]:"showing show"},m=s.forwardRef((e,t)=>(0,d.jsx)(c.Z,{...e,ref:t,transitionClasses:u}));m.displayName="ToastFade";var h=n(51176),p=n(54728),x=n(59680);let f=s.createContext({onClose(){}}),g=s.forwardRef((e,t)=>{let{bsPrefix:n,closeLabel:r="Close",closeVariant:o,closeButton:i=!0,className:l,children:c,...u}=e;n=(0,p.vE)(n,"toast-header");let m=(0,s.useContext)(f),g=(0,h.Z)(e=>{null==m||null==m.onClose||m.onClose(e)});return(0,d.jsxs)("div",{ref:t,...u,className:a()(n,l),children:[c,i&&(0,d.jsx)(x.Z,{"aria-label":r,variant:o,onClick:g,"data-dismiss":"toast"})]})});g.displayName="ToastHeader";let v=s.forwardRef((e,t)=>{let{className:n,bsPrefix:s,as:r="div",...o}=e;return s=(0,p.vE)(s,"toast-body"),(0,d.jsx)(r,{ref:t,className:a()(n,s),...o})});v.displayName="ToastBody";let b=s.forwardRef((e,t)=>{let{bsPrefix:n,className:r,transition:l=m,show:c=!0,animation:u=!0,delay:h=5e3,autohide:x=!1,onClose:g,onEntered:v,onExit:b,onExiting:j,onEnter:y,onEntering:N,onExited:w,bg:_,...C}=e;n=(0,p.vE)(n,"toast");let E=(0,s.useRef)(h),S=(0,s.useRef)(g);(0,s.useEffect)(()=>{E.current=h,S.current=g},[h,g]);let T=function(){let e=function(){let e=(0,s.useRef)(!0),t=(0,s.useRef)(()=>e.current);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}(),t=(0,s.useRef)();return(0,o.Z)(()=>clearTimeout(t.current)),(0,s.useMemo)(()=>{let n=()=>clearTimeout(t.current);return{set:function(s,r=0){e()&&(n(),r<=i?t.current=setTimeout(s,r):function e(t,n,s){let r=s-Date.now();t.current=r<=i?setTimeout(n,r):setTimeout(()=>e(t,n,s),i)}(t,s,Date.now()+r))},clear:n,handleRef:t}},[])}(),R=!!(x&&c),Z=(0,s.useCallback)(()=>{R&&(null==S.current||S.current())},[R]);(0,s.useEffect)(()=>{T.set(Z,E.current)},[T,Z]);let k=(0,s.useMemo)(()=>({onClose:g}),[g]),P=!!(l&&u),B=(0,d.jsx)("div",{...C,ref:t,className:a()(n,r,_&&"bg-".concat(_),!P&&(c?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,d.jsx)(f.Provider,{value:k,children:P&&l?(0,d.jsx)(l,{in:c,onEnter:y,onEntering:N,onEntered:v,onExit:b,onExiting:j,onExited:w,unmountOnExit:!0,children:B}):B})});b.displayName="Toast";var j=Object.assign(b,{Body:v,Header:g})},88748:function(e,t,n){"use strict";var s=n(93967),r=n.n(s),a=n(67294),o=n(54728),i=n(85893);let l={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},c=a.forwardRef((e,t)=>{let{bsPrefix:n,position:s,containerPosition:a,className:c,as:d="div",...u}=e;return n=(0,o.vE)(n,"toast-container"),(0,i.jsx)(d,{ref:t,...u,className:r()(n,s&&l[s],a&&"position-".concat(a),c)})});c.displayName="ToastContainer",t.Z=c},88135:function(e,t,n){"use strict";n.d(t,{nd:function(){return o},w7:function(){return a}});var s=n(87066);let r="".concat("https://www.webapi.taxisafar.com","/api"),a=e=>s.Z.post("".concat(r,"/users/login"),e).then(e=>e.data),o=(e,t)=>s.Z.put("".concat(r,"/users/").concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)},68944:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n(85893),r=n(81786),a=n(28115),o=n(9008),i=n.n(o),l=n(11163),c=n(67294),d=n(41664),u=n.n(d),m=n(55066),h=n(16310),p=n(88748),x=n(79556),f=n(88135),g=n(25675),v=n.n(g);function b(){let{isAuthenticated:e,checkAuth:t}=(0,a.Z)(),{customerDetail:n}=(0,r.j)(),o=(0,l.useRouter)(),d=(0,c.useRef)(!1),[g,b]=(0,c.useState)(!1),[j,y]=(0,c.useState)(""),[N,w]=(0,c.useState)(!1),[_,C]=(0,c.useState)(""),[E,S]=(0,c.useState)(""),[T,R]=(0,c.useState)(!1),[Z,k]=(0,c.useState)(["","","",""]),[P,B]=(0,c.useState)(""),[O,F]=(0,c.useState)(""),[q,D]=(0,c.useState)(30),[M,W]=(0,c.useState)(!0);(0,c.useEffect)(()=>{d.current&&e&&(null==n?void 0:n.role)=="driver"?o.push("/driver-dashboard"):d.current=!0},[e]),(0,c.useEffect)(()=>{if(T){if(q>0){let e=setTimeout(()=>D(q-1),1e3);return()=>clearTimeout(e)}W(!1)}},[q,T]);let I=(0,m.TA)({initialValues:{country_code:"+91",phone_number:"",role:"driver"},validationSchema:h.Ry({country_code:h.Z_().required("Country code is required"),phone_number:h.Z_().required("Phone number is required").matches(/^[0-9]+$/,"Must be only digits").min(10,"Phone number must be 10 digits").max(10,"Phone number must be 10 digits")}),onSubmit:async e=>{try{let t="".concat(e.country_code).concat(e.phone_number);e.role,S("");let n=await (0,f.w7)(e);console.log("response",n),!0==n.status?(F(t),R(!0),D(30),W(!0)):(y((null==n?void 0:n.message)||"Something went wrong!"),S((null==n?void 0:n.message)||"Something went wrong!"))}catch(e){y("Something went wrong!"),S("Something went wrong!")}}}),L=(e,t)=>{if(/^\d*$/.test(t)&&t.length<=1){let n=[...Z];if(n[e]=t,k(n),B(""),t&&e<3){let t=document.getElementById("otp-input-".concat(e+1));t&&t.focus()}n.every(e=>""!==e)&&4===n.join("").length&&H()}},V=(e,t)=>{if("Backspace"===t.key&&!Z[e]&&e>0){let t=document.getElementById("otp-input-".concat(e-1));t&&t.focus()}},H=async()=>{},U=async()=>{console.log("Resending OTP..."),D(30),W(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Driver Login"})}),(0,s.jsxs)("section",{className:"delivery-login-form-section",children:[(0,s.jsxs)("div",{className:"delivery-login-logo-container",children:[(0,s.jsx)(v(),{src:"/images/logo/d-logo.png",alt:"logo",width:120,height:20,className:"delivery-login-logo"}),T&&(0,s.jsx)("div",{className:"back-arrow",onClick:()=>R(!1),children:(0,s.jsx)(v(),{src:"/images/icons/back-arrow.svg",alt:"logo",width:38,height:38,className:"delivery-login-logo"})})]}),T?(0,s.jsxs)("div",{className:"otp-verification-section",children:[(0,s.jsx)("h2",{className:"otp-title",children:"OTP Verification"}),(0,s.jsxs)("p",{className:"otp-description",children:["Enter OTP sent to ",(0,s.jsxs)("span",{children:[" ",O]})]}),(0,s.jsxs)("div",{className:"otp-verification-container",children:[(0,s.jsx)("label",{htmlFor:"phone_number",className:"delivery-form-level  ",children:"OTP"}),(0,s.jsx)("div",{className:"otp-input-container",children:Z.map((e,t)=>(0,s.jsx)("input",{id:"otp-input-".concat(t),type:"text",className:"otp-input",placeholder:"0",value:e,onChange:e=>L(t,e.target.value),onKeyDown:e=>V(t,e),maxLength:1,autoFocus:0===t},t))}),P&&(0,s.jsx)("p",{className:"text-danger otp-error-message",children:P})]}),(0,s.jsx)("button",{className:"taxisafar-theme-button verify-btn w-100 mt-3",onClick:H,disabled:4!==Z.join("").length,children:"Verify"}),(0,s.jsx)("div",{className:"resend-otp mt-3",children:(0,s.jsxs)("p",{className:"resend-text text-center",children:[" ",(0,s.jsx)("button",{type:"button",className:"resend-button",onClick:U,disabled:M,children:M?(0,s.jsxs)("span",{style:{color:"#01000599",fontWeight:"400"},children:["  Resend  again in ",(0,s.jsxs)("span",{style:{color:"#010005",fontWeight:"600"},children:["00:",q]}),"  "]}):"Resend OTP"})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"delivery-login-info",children:[(0,s.jsx)("h1",{className:"delivery-title",children:"Welcome Back!"}),(0,s.jsx)("p",{className:"delivery-description",children:"Login with your mobile number"})]}),(0,s.jsx)("form",{className:"form",onSubmit:I.handleSubmit,autoComplete:"off",children:(0,s.jsx)("div",{className:"trip-options",children:(0,s.jsxs)("div",{className:"",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"phone_number",className:"delivery-form-level",children:"Mobile Number"}),(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsxs)("select",{className:"form-select me-2",style:{width:"94px"},id:"country_code",name:"country_code",value:I.values.country_code,onChange:I.handleChange,onBlur:I.handleBlur,children:[(0,s.jsx)("option",{value:"+91",children:" +91"}),(0,s.jsx)("option",{value:"+1",children:" +1"}),(0,s.jsx)("option",{value:"+44",children:" +44"}),(0,s.jsx)("option",{value:"+61",children:" +61"}),(0,s.jsx)("option",{value:"+971",children:" +971"})]}),(0,s.jsx)("input",{type:"tel",className:"delivery-form-control",id:"phone_number",name:"phone_number",placeholder:"Enter your mobile number",value:I.values.phone_number,onChange:I.handleChange,onBlur:I.handleBlur})]}),(0,s.jsx)("p",{className:" error-messages",children:E}),I.touched.phone_number&&I.errors.phone_number?(0,s.jsx)("p",{className:"text-danger text-start mb-0 error-message",children:I.errors.phone_number}):null]}),(0,s.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 mt-3",children:(0,s.jsx)("button",{type:"submit",className:"taxisafar-theme-button delivery-login-btn w-100",disabled:I.isSubmitting,children:(0,s.jsx)("span",{className:"btn-title",children:I.isSubmitting?"Please Wait..":"Get OTP"})})})]})})})]}),!T&&(0,s.jsxs)("p",{className:"delivery-login-new-user",children:[(0,s.jsx)("span",{className:"",children:"New User?"}),(0,s.jsx)(u(),{href:"/driver-register",className:"ms-1",children:"Sign Up"})]}),(0,s.jsxs)(p.Z,{position:"top-end",className:"p-3",children:[(0,s.jsx)(x.Z,{onClose:()=>b(!1),show:g,delay:3e3,autohide:!0,bg:"danger",children:(0,s.jsx)(x.Z.Body,{className:"text-white",children:j})}),(0,s.jsx)(x.Z,{onClose:()=>w(!1),show:N,delay:3e3,autohide:!0,bg:"success",children:(0,s.jsx)(x.Z.Body,{className:"text-white",children:_})})]})]})]})}}},function(e){e.O(0,[658,6705,5675,2888,9774,179],function(){return e(e.s=27128)}),_N_E=e.O()}]);