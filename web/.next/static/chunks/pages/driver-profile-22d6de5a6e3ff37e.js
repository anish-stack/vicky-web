(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5623],{44864:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/driver-profile",function(){return t(43564)}])},79556:function(e,a,t){"use strict";t.d(a,{Z:function(){return j}});var s=t(67294),n=t(93967),l=t.n(n),i=t(76852);let r=2147483648-1;var o=t(16592),d=t(47218),c=t(85893);let u={[o.d0]:"showing",[o.Ix]:"showing show"},m=s.forwardRef((e,a)=>(0,c.jsx)(d.Z,{...e,ref:a,transitionClasses:u}));m.displayName="ToastFade";var h=t(51176),p=t(54728),v=t(59680);let x=s.createContext({onClose(){}}),f=s.forwardRef((e,a)=>{let{bsPrefix:t,closeLabel:n="Close",closeVariant:i,closeButton:r=!0,className:o,children:d,...u}=e;t=(0,p.vE)(t,"toast-header");let m=(0,s.useContext)(x),f=(0,h.Z)(e=>{null==m||null==m.onClose||m.onClose(e)});return(0,c.jsxs)("div",{ref:a,...u,className:l()(t,o),children:[d,r&&(0,c.jsx)(v.Z,{"aria-label":n,variant:i,onClick:f,"data-dismiss":"toast"})]})});f.displayName="ToastHeader";let g=s.forwardRef((e,a)=>{let{className:t,bsPrefix:s,as:n="div",...i}=e;return s=(0,p.vE)(s,"toast-body"),(0,c.jsx)(n,{ref:a,className:l()(t,s),...i})});g.displayName="ToastBody";let N=s.forwardRef((e,a)=>{let{bsPrefix:t,className:n,transition:o=m,show:d=!0,animation:u=!0,delay:h=5e3,autohide:v=!1,onClose:f,onEntered:g,onExit:N,onExiting:j,onEnter:b,onEntering:w,onExited:y,bg:_,...C}=e;t=(0,p.vE)(t,"toast");let E=(0,s.useRef)(h),F=(0,s.useRef)(f);(0,s.useEffect)(()=>{E.current=h,F.current=f},[h,f]);let T=function(){let e=function(){let e=(0,s.useRef)(!0),a=(0,s.useRef)(()=>e.current);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),a.current}(),a=(0,s.useRef)();return(0,i.Z)(()=>clearTimeout(a.current)),(0,s.useMemo)(()=>{let t=()=>clearTimeout(a.current);return{set:function(s,n=0){e()&&(t(),n<=r?a.current=setTimeout(s,n):function e(a,t,s){let n=s-Date.now();a.current=n<=r?setTimeout(t,n):setTimeout(()=>e(a,t,s),r)}(a,s,Date.now()+n))},clear:t,handleRef:a}},[])}(),Z=!!(v&&d),S=(0,s.useCallback)(()=>{Z&&(null==F.current||F.current())},[Z]);(0,s.useEffect)(()=>{T.set(S,E.current)},[T,S]);let B=(0,s.useMemo)(()=>({onClose:f}),[f]),R=!!(o&&u),P=(0,c.jsx)("div",{...C,ref:a,className:l()(t,n,_&&"bg-".concat(_),!R&&(d?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,c.jsx)(x.Provider,{value:B,children:R&&o?(0,c.jsx)(o,{in:d,onEnter:b,onEntering:w,onEntered:g,onExit:N,onExiting:j,onExited:y,unmountOnExit:!0,children:P}):P})});N.displayName="Toast";var j=Object.assign(N,{Body:g,Header:f})},88748:function(e,a,t){"use strict";var s=t(93967),n=t.n(s),l=t(67294),i=t(54728),r=t(85893);let o={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},d=l.forwardRef((e,a)=>{let{bsPrefix:t,position:s,containerPosition:l,className:d,as:c="div",...u}=e;return t=(0,i.vE)(t,"toast-container"),(0,r.jsx)(c,{ref:a,...u,className:n()(t,s&&o[s],l&&"position-".concat(l),d)})});d.displayName="ToastContainer",a.Z=d},88135:function(e,a,t){"use strict";t.d(a,{nd:function(){return i},w7:function(){return l}});var s=t(87066);let n="".concat("https://www.webapi.taxisafar.com","/api"),l=e=>s.Z.post("".concat(n,"/users/login"),e).then(e=>e.data),i=(e,a)=>s.Z.put("".concat(n,"/users/").concat(e),a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)},43564:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var s=t(85893),n=t(81786),l=t(28115),i=t(67294),r=t(11163),o=t(55066),d=t(16310),c=t(88748),u=t(79556),m=t(88135),h=t(9008),p=t.n(h);function v(){let{isAuthenticated:e,checkAuth:a}=(0,l.Z)(),{customerDetail:t}=(0,n.j)(),h=(0,r.useRouter)(),[v,x]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[N,j]=(0,i.useState)(""),[b,w]=(0,i.useState)(!1),[y,_]=(0,i.useState)("");(0,i.useEffect)(()=>{if(!v){let e=setTimeout(()=>{x(!0)},1e3);return()=>clearTimeout(e)}},[v]),(0,i.useEffect)(()=>{v&&!1===e&&(x(!1),h.push("/driver-login"))},[v,e]);let[C,E]=(0,i.useState)(null),F=(0,o.TA)({initialValues:{phone_number:"",name:"",image:"",address:"",city:"",pin_code:""},validationSchema:d.Ry({image:d.nK().test("fileFormat","Unsupported file format. Only JPG, JPEG, and PNG are allowed",e=>void 0===e||void 0===e.type||e&&["image/jpeg","image/png"].includes(e.type)).test("fileSize","File is too large. Maximum size is 5MB",e=>void 0===e||void 0===e.type||e&&e.size<=5242880)}),onSubmit:async e=>{if(null==t?void 0:t.id)try{let d=new FormData;d.append("phone_number",e.phone_number),d.append("name",e.name),e.image&&d.append("image",e.image),d.append("address",e.address),d.append("city",e.city),d.append("pin_code",e.pin_code);let c=await (0,m.nd)(null==t?void 0:t.id,d);if(!0==c.status){if(null==c?void 0:c.data)try{var a,s,n,l,i,r,o;w(!0),F.setFieldValue("phone_number",(null==c?void 0:null===(a=c.data)||void 0===a?void 0:a.phone_number)||""),F.setFieldValue("name",(null==c?void 0:null===(s=c.data)||void 0===s?void 0:s.name)||""),F.setFieldValue("address",(null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.address)||""),F.setFieldValue("city",(null==c?void 0:null===(l=c.data)||void 0===l?void 0:l.city)||""),F.setFieldValue("pin_code",(null==c?void 0:null===(i=c.data)||void 0===i?void 0:i.pin_code)||""),E((null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.image)?"".concat("https://www.webapi.taxisafar.com","/users/").concat(null==c?void 0:null===(o=c.data)||void 0===o?void 0:o.image):""),_("".concat(null==c?void 0:c.message))}catch(e){g(!0),j("Something Went Wrong!!")}}else!1==c.status?(g(!0),j("".concat(null==c?void 0:c.message))):(g(!0),j("Something Went Wrong!!"))}catch(e){g(!0),j("Something Went Wrong!!")}}});return(0,i.useEffect)(()=>{t&&(F.setFieldValue("phone_number",(null==t?void 0:t.phone_number)?null==t?void 0:t.phone_number:""),F.setFieldValue("name",(null==t?void 0:t.name)?null==t?void 0:t.name:""),F.setFieldValue("address",(null==t?void 0:t.address)?null==t?void 0:t.address:""),F.setFieldValue("city",(null==t?void 0:t.city)?null==t?void 0:t.city:""),F.setFieldValue("pin_code",(null==t?void 0:t.pin_code)?null==t?void 0:t.pin_code:""),E((null==t?void 0:t.image)?"".concat("https://www.webapi.taxisafar.com","/users/").concat(null==t?void 0:t.image):""))},[t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p(),{children:(0,s.jsx)("title",{children:"Driver Profile"})}),(0,s.jsx)(c.Z,{className:"toast-container-custom",children:(0,s.jsxs)(u.Z,{onClose:()=>g(!1),show:f,delay:3e3,autohide:!0,className:"bg-danger text-white",children:[(0,s.jsxs)(u.Z.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Message"}),(0,s.jsx)("small",{children:"Just now"})]}),(0,s.jsx)(u.Z.Body,{className:"text-start",children:N})]})}),(0,s.jsx)(c.Z,{className:"toast-container-custom",children:(0,s.jsxs)(u.Z,{onClose:()=>w(!1),show:b,delay:3e3,autohide:!0,className:"bg-success text-white",children:[(0,s.jsxs)(u.Z.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Message"}),(0,s.jsx)("small",{children:"Just now"})]}),(0,s.jsx)(u.Z.Body,{className:"text-start",children:y})]})}),(0,s.jsx)("div",{className:"container",style:{marginTop:"80px"},children:(0,s.jsx)("section",{className:"contact-details driver-profile",children:(0,s.jsx)("div",{className:"container py-5",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12",children:(0,s.jsxs)("form",{onSubmit:F.handleSubmit,className:"profile-form",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-sm-12",children:(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"driver-profile-pic",children:(0,s.jsxs)("div",{className:"position-relative d-inline-block",children:[(0,s.jsx)("img",{src:C||"/images/user/user-profile.png",alt:"Profile",className:"img-thumbnail",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"50%"}}),(0,s.jsx)("input",{type:"file",name:"image",className:"d-none",id:"profileImageInput",accept:"image/*",onChange:e=>{let a=e.target.files[0];if(a){let e=new FileReader;e.onloadend=()=>{E(e.result),F.setFieldValue("image",a)},e.readAsDataURL(a)}}}),(0,s.jsx)("label",{htmlFor:"profileImageInput",className:"position-absolute bottom-0 end-0 bg-white rounded-circle shadow profile-pencil",style:{cursor:"pointer"},children:(0,s.jsx)("i",{className:"fas fa-pencil-alt"})})]})}),F.touched.image&&F.errors.image?(0,s.jsx)("p",{className:"text-danger text-start mb-0 error-message",children:F.errors.image}):null]})}),(0,s.jsx)("div",{className:"col-sm-6",children:(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"mb-1",children:"Name"}),(0,s.jsx)("input",{name:"name",className:"form-control",type:"text",placeholder:"Enter Name",value:F.values.name,onChange:F.handleChange,onBlur:F.handleBlur})]})}),(0,s.jsx)("div",{className:"col-sm-6",children:(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"mb-1",children:"Phone Number"}),(0,s.jsx)("input",{name:"form",className:"form-control required",type:"text",placeholder:"Enter Phone Number",value:F.values.phone_number,onChange:F.handleChange,onBlur:F.handleBlur,disabled:!0})]})})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-sm-4",children:(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"mb-1",children:"Address"}),(0,s.jsx)("input",{name:"address",className:"form-control required",type:"text",placeholder:"Enter Address",value:F.values.address,onChange:F.handleChange,onBlur:F.handleBlur})]})}),(0,s.jsx)("div",{className:"col-sm-4",children:(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"mb-1",children:"City"}),(0,s.jsx)("input",{name:"city",className:"form-control required",type:"text",placeholder:"Enter Your City Name",value:F.values.city,onChange:F.handleChange,onBlur:F.handleBlur})]})}),(0,s.jsx)("div",{className:"col-sm-4",children:(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"mb-1",children:"Pincode"}),(0,s.jsx)("input",{name:"pin_code",className:"form-control required",type:"text",placeholder:"Enter Your Pincode",value:F.values.pin_code,onChange:F.handleChange,onBlur:F.handleBlur})]})})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)("button",{type:"submit",className:"taxisafar-theme-button",disabled:F.isSubmitting,children:(0,s.jsxs)("span",{className:"btn-title",children:[" ",F.isSubmitting?"Please Wait...":"Update Profile"]})})})]})})})})})})]})}}},function(e){e.O(0,[658,6705,2888,9774,179],function(){return e(e.s=44864)}),_N_E=e.O()}]);