(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1913],{8876:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/driver-kyc",function(){return n(85259)}])},88135:function(e,t,n){"use strict";n.d(t,{nd:function(){return r},w7:function(){return o}});var a=n(87066);let i="".concat("https://www.webapi.taxisafar.com","/api"),o=e=>a.Z.post("".concat(i,"/users/login"),e).then(e=>e.data),r=(e,t)=>a.Z.put("".concat(i,"/users/").concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)},85259:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(85893),i=n(81786),o=n(28115),r=n(67294),u=n(11163),d=n(55066),l=n(16310),c=n(88135),s=n(9008),h=n.n(s);function p(){let{isAuthenticated:e,checkAuth:t}=(0,o.Z)(),{customerDetail:n}=(0,i.j)(),s=(0,u.useRouter)(),[p,f]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!1),[_,w]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),[S,y]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!p){let e=setTimeout(()=>{f(!0)},1e3);return()=>clearTimeout(e)}},[p]),(0,r.useEffect)(()=>{p&&!1===e&&(f(!1),s.push("/driver-login"))},[p,e]);let[E,x]=(0,r.useState)(null),F=(0,d.TA)({initialValues:{adhar_card:"",phone_number:""},validationSchema:l.Ry({adhar_card:l.nK().test("fileFormat","Unsupported file format. Only JPG, JPEG, and PNG are allowed",e=>void 0===e||void 0===e.type||e&&["image/jpeg","image/png"].includes(e.type)).test("fileSize","File is too large. Maximum size is 5MB",e=>void 0===e||void 0===e.type||e&&e.size<=5242880)}),onSubmit:async e=>{if(null==n?void 0:n.id)try{let o=new FormData;o.append("phone_number",e.phone_number),e.adhar_card&&o.append("adhar_card",e.adhar_card);let r=await (0,c.nd)(null==n?void 0:n.id,o);if(!0==r.status){if(null==r?void 0:r.data)try{var t,a,i;b(!0),F.setFieldValue("phone_number",(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.phone_number)||""),x((null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.adhar_card)?"".concat("https://www.webapi.taxisafar.com","/users/").concat(null==r?void 0:null===(i=r.data)||void 0===i?void 0:i.adhar_card):""),y("".concat(null==r?void 0:r.message))}catch(e){v(!0),w("Something Went Wrong!!")}}else!1==r.status?(v(!0),w("".concat(null==r?void 0:r.message))):(v(!0),w("Something Went Wrong!!"))}catch(e){v(!0),w("Something Went Wrong!! ".concat(e))}}});return(0,r.useEffect)(()=>{n&&(F.setFieldValue("phone_number",(null==n?void 0:n.phone_number)?null==n?void 0:n.phone_number:""),x((null==n?void 0:n.adhar_card)?"".concat("https://www.webapi.taxisafar.com","/users/").concat(null==n?void 0:n.adhar_card):""))},[n]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h(),{children:(0,a.jsx)("title",{children:"Driver KYC"})})})}},9008:function(e,t,n){e.exports=n(7828)}},function(e){e.O(0,[6705,2888,9774,179],function(){return e(e.s=8876)}),_N_E=e.O()}]);